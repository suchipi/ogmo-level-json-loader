const parseOgmo = require("./parseOgmo");

test("parseOgmo - level json", async () => {
  expect(await parseOgmo("fixtures/level1.json")).toMatchInlineSnapshot(`
    "module.exports = {
      \\"ogmoVersion\\": \\"3.3.0\\",
      \\"width\\": 320,
      \\"height\\": 240,
      \\"offsetX\\": 0,
      \\"offsetY\\": 0,
      \\"values\\": {
        \\"name\\": \\"Unnamed Level\\",
        \\"some_color\\": \\"#ff7474ff\\",
        \\"some_enum\\": \\"ONE\\",
        \\"some_float\\": 0.3,
        \\"some_int\\": 3,
        \\"some_text\\": \\"\\"
      },
      \\"layers\\": [{
        \\"name\\": \\"tiles\\",
        \\"_eid\\": \\"17907160\\",
        \\"offsetX\\": 0,
        \\"offsetY\\": 0,
        \\"gridCellWidth\\": 16,
        \\"gridCellHeight\\": 16,
        \\"gridCellsX\\": 20,
        \\"gridCellsY\\": 15,
        \\"tileset\\": \\"pokemon tiles\\",
        \\"data\\": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 76, 77, 78, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 114, 115, 116, 0, 0, 228, 229, 229, 229, 230, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 152, 153, 154, 0, 0, 266, 267, 231, 267, 268, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 190, 191, 192, 0, 0, 0, 42, 42, 42, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 0, 0, 0, 0, 0, 0, 0, 0, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 0, 0, 0, 0, 0, 0, 0, 0, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 42, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 42, 42, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 42, 42, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 42, 42, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 42, 42, 42, 0, 0, 0, 0, 0],
        \\"exportMode\\": 0,
        \\"arrayMode\\": 0
      }, {
        \\"name\\": \\"collision\\",
        \\"_eid\\": \\"17919195\\",
        \\"offsetX\\": 0,
        \\"offsetY\\": 0,
        \\"gridCellWidth\\": 16,
        \\"gridCellHeight\\": 16,
        \\"gridCellsX\\": 20,
        \\"gridCellsY\\": 15,
        \\"grid\\": [\\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"1\\", \\"1\\", \\"1\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"1\\", \\"1\\", \\"1\\", \\"0\\", \\"0\\", \\"1\\", \\"1\\", \\"1\\", \\"1\\", \\"1\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"1\\", \\"1\\", \\"1\\", \\"0\\", \\"0\\", \\"1\\", \\"1\\", \\"0\\", \\"1\\", \\"1\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"1\\", \\"0\\", \\"1\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\", \\"0\\"],
        \\"arrayMode\\": 0
      }, {
        \\"name\\": \\"entities\\",
        \\"_eid\\": \\"17911144\\",
        \\"offsetX\\": 0,
        \\"offsetY\\": 0,
        \\"gridCellWidth\\": 16,
        \\"gridCellHeight\\": 16,
        \\"gridCellsX\\": 20,
        \\"gridCellsY\\": 15,
        \\"entities\\": [{
          \\"name\\": \\"player!!\\",
          \\"id\\": 0,
          \\"_eid\\": \\"17913416\\",
          \\"x\\": 214,
          \\"y\\": 112.5,
          \\"originX\\": 0,
          \\"originY\\": 0,
          \\"values\\": {
            \\"some_boolean\\": false
          }
        }, {
          \\"name\\": \\"new entity\\",
          \\"id\\": 1,
          \\"_eid\\": \\"17916759\\",
          \\"x\\": 72,
          \\"y\\": 133.5,
          \\"originX\\": 0,
          \\"originY\\": 0
        }]
      }, {
        \\"name\\": \\"decals\\",
        \\"_eid\\": \\"17910275\\",
        \\"offsetX\\": 0,
        \\"offsetY\\": 0,
        \\"gridCellWidth\\": 16,
        \\"gridCellHeight\\": 16,
        \\"gridCellsX\\": 20,
        \\"gridCellsY\\": 15,
        \\"decals\\": [{
          \\"x\\": 78,
          \\"y\\": 60.5,
          \\"scaleX\\": 5,
          \\"scaleY\\": 5,
          \\"rotation\\": -0.5247934168526351,
          \\"texture\\": typeof require(\\"./decals/player-overworld-preview.png\\") === \\"object\\" && require(\\"./decals/player-overworld-preview.png\\") != null && require(\\"./decals/player-overworld-preview.png\\").__esModule && {}.hasOwnProperty.call(require(\\"./decals/player-overworld-preview.png\\"), \\"default\\") ? require(\\"./decals/player-overworld-preview.png\\").default : require(\\"./decals/player-overworld-preview.png\\"),
          \\"values\\": {
            \\"some_float\\": 0.1234
          }
        }],
        \\"folder\\": \\"decals\\"
      }]
    };"
  `);
});

test("parseOgmo - non-level json", async () => {
  expect(await parseOgmo("fixtures/non-level.json")).toMatchInlineSnapshot(`
    "module.exports = {
    	\\"just\\": \\"some\\",
    	\\"stuff\\": true,
    	\\"type\\": \\"ArrayExpression\\",
    	\\"elements\\": []
    }
    "
  `);
});
